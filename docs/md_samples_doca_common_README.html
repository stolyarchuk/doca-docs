<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NVIDIA DOCA SDK: DOCA Core Samples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<!-- Doxygen Awesome CSS -->
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
DoxygenAwesomeFragmentCopyButton.init()
DoxygenAwesomeParagraphLink.init()
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectname">NVIDIA DOCA SDK
  </td>
  <td id="projectbrief">Data Center on a Chip Framework Documentation</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_samples_doca_common_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DOCA Core Samples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md41"></a>
Info</h1>
<p>All the DOCA samples described in this section are governed under the BSD-3 software license agreement.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Progress Engine Samples</h1>
<p>All progress engine (PE) samples use DOCA DMA because of its simplicity. PE samples should be used to understand the PE, not DOCA DMA.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
pe_common</h2>
<p><code><a class="el" href="pe__common_8c.html">pe_common.c</a></code> and <code><a class="el" href="pe__common_8h.html">pe_common.h</a></code> contain code that is used in most or all PE samples.</p>
<p>Users can find core code (e.g., create MMAP) and common code that uses PE (e.g., poll_for_completion).</p>
<p>Struct <code><a class="el" href="structpe__sample__state__base.html">pe_sample_state_base</a></code> (defined in <code><a class="el" href="pe__common_8h.html">pe_common.h</a></code>) is the base state for all PE samples, containing common members that are used by most or all PE samples.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
pe_polling</h2>
<p>The polling sample is the most basic sample for using PE. Start with this sample to learn how to use DOCA PE.</p>
<p><b>Info</b>: You can diff between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and any other <code>pe_x_sample.c</code> to see the unique features that the other sample demonstrates.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to create a PE</li>
<li>How to connect a context to the PE</li>
<li>How to allocate tasks</li>
<li>How to submit tasks</li>
<li>How to run the PE</li>
<li>How to cleanup (e.g., destroy context, destroy PE)</li>
</ul>
<p><b>Note</b>: Pay attention to the order of destruction (e.g., all contexts must be destroyed before the PE).</p>
<p>The sample performs the following:</p><ul>
<li>Uses one DMA context.</li>
<li>Allocates and submits 16 DMA tasks.</li>
</ul>
<p><b>Info</b>: Task completion callback checks that the copied content is valid.</p>
<ul>
<li>Polls until all tasks are completed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md45"></a>
pe_async_stop</h2>
<p>A context can be stopped while it still processes tasks. This stop is asynchronous because the context must complete/abort all tasks.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to asynchronously stop a context</li>
<li>How to implement a context state changed callback (with regards to context moving from stopping to idle)</li>
<li>How to implement task error callback (check if this is a real error or if the task is flushed)</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Submits 16 tasks and stops the context after half of the tasks are completed.</li>
<li>Polls until all tasks are complete (half are completed successfully, half are flushed).</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__async__stop__sample_8c.html">pe_async_stop_sample.c</a></code> is to learn how to use PE APIs for event-driven mode.</p>
<h2><a class="anchor" id="autotoc_md46"></a>
pe_event</h2>
<p>Event-driven mode reduces CPU utilization (wait for event until a task is complete) but may increase latency or reduce performance.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to run the PE in event-driven mode</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Runs 16 DMA tasks.</li>
<li>Waits for event.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__event__sample_8c.html">pe_event_sample.c</a></code> is to learn how to use PE APIs for event-driven mode.</p>
<h2><a class="anchor" id="autotoc_md47"></a>
pe_multi_context</h2>
<p>A PE can host more than one instance of a specific context. This facilitates running a single PE with multiple BlueField devices.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to run a single PE with multiple instances of a specific context</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Connects 4 instances of DOCA DMA context to the PE.</li>
<li>Allocates and submits 4 tasks to every context instance.</li>
<li>Polls until all tasks are complete.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__multi__context__sample_8c.html">pe_multi_context_sample.c</a></code> is to learn how to use PE with multiple instances of a context.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
pe_reactive</h2>
<p>PE and contexts can be maintained in callbacks (task completion and state changed).</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to maintain the context and PE in the callbacks instead of the program's main function</li>
</ul>
<p>The user must make sure to:</p><ul>
<li>Review the task completion callback and the state changed callbacks</li>
<li>Review the difference between poll_to_completion and the polling loop in main</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Runs 16 DMA tasks.</li>
<li>Stops the DMA context in the completion callback after all tasks are complete.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__reactive__sample_8c.html">pe_reactive_sample.c</a></code> is to learn how to use PE in reactive model.</p>
<h2><a class="anchor" id="autotoc_md49"></a>
pe_single_task_cb</h2>
<p>A DOCA task can invoke a success or error callback. Both callbacks share the same structure (same input parameters).</p>
<p>DOCA recommends using 2 callbacks:</p><ul>
<li>Success callback – does not need to check the task status, thereby improving performance</li>
<li>Error callback – may need to run a different flow than success callback</li>
</ul>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to use a single callback instead of two callbacks</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Runs 16 DMA tasks.</li>
<li>Handles completion with a single callback.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__single__task__comp__cb__sample_8c.html">pe_single_task_comp_cb_sample.c</a></code> is to learn how to use PE with a single completion callback.</p>
<h2><a class="anchor" id="autotoc_md50"></a>
pe_task_error</h2>
<p>Task execution may fail causing the associated context (e.g., DMA) to move to stopping state due to this fatal error.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to mitigate a task error during runtime</li>
</ul>
<p>The user must make sure to:</p><ul>
<li>Review the state changed callback and the error callback to see how the sample mitigates context error</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Submits 255 tasks.</li>
<li>Allocates the second task with invalid parameters that cause hardware to fail.</li>
<li>Mitigates the failure and polls until all submitted tasks are flushed.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__task__error__sample_8c.html">pe_task_error_sample.c</a></code> is to learn how to mitigate context error.</p>
<h2><a class="anchor" id="autotoc_md51"></a>
pe_task_resubmit</h2>
<p>A task can be freed or reused after it is completed:</p>
<ul>
<li>Task resubmit can improve performance because the program does not free and allocate the task.</li>
<li>Task resubmit can reduce memory usage (using a smaller task pool).</li>
<li>Task members (e.g., source or destination buffer) can be set, so resubmission can be used if the source or destination are changed every iteration.</li>
</ul>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to re-submit a task in the completion callback</li>
<li>How to replace buffers in a DMA task (similar to other task types)</li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Allocates a set of 4 tasks and 16 buffer pairs.</li>
<li>Uses the tasks to copy all sources to destinations by resubmitting the tasks.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__task__resubmit__sample_8c.html">pe_task_resubmit_sample.c</a></code> is to learn how to use task resubmission.</p>
<h2><a class="anchor" id="autotoc_md52"></a>
pe_task_try_submit</h2>
<p><code>doca_task_submit</code> does not validate task inputs (to increase performance). Developers can use <code>doca_task_try_submit</code> to validate the tasks during development.</p>
<p><b>Note</b>: Task validation impacts performance and should not be used in production.</p>
<p>The sample demonstrates the following functions:</p><ul>
<li>How to use <code>doca_task_try_submit</code> instead of <code>doca_task_submit</code></li>
</ul>
<p>The sample performs the following:</p><ul>
<li>Allocates and tries to submit tasks using <code>doca_task_try_submit</code>.</li>
</ul>
<p>The difference between <code><a class="el" href="pe__polling__sample_8c.html">pe_polling_sample.c</a></code> and <code><a class="el" href="pe__task__try__submit__sample_8c.html">pe_task_try_submit_sample.c</a></code> is to learn how to use <code>doca_task_try_submit</code>.</p>
<h2><a class="anchor" id="autotoc_md53"></a>
Graph Sample</h2>
<p>The graph sample demonstrates how to use DOCA graph with PE. The sample can be used to learn how to build and use DOCA graph.</p>
<p>The sample uses two nodes of DOCA DMA and one user node.</p>
<p>The graph runs both DMA nodes (copying a source buffer to two destinations). Once both nodes are complete, the graph runs the user node that compares the buffers.</p>
<p>The sample runs 10 instances of the graph in parallel. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 13 2025 09:23:37 for NVIDIA DOCA SDK by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
