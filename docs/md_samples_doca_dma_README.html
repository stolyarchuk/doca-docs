<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NVIDIA DOCA SDK: DMA Local Copy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<!-- Doxygen Awesome CSS -->
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
DoxygenAwesomeFragmentCopyButton.init()
DoxygenAwesomeParagraphLink.init()
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectname">NVIDIA DOCA SDK
  </td>
  <td id="projectbrief">Data Center on a Chip Framework Documentation</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_samples_doca_dma_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DMA Local Copy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This sample illustrates how to locally copy memory with DMA from one buffer to another on the DPU.</p>
<p>This sample should be run on the DPU.</p>
<h2><a class="anchor" id="autotoc_md96"></a>
The sample logic includes:</h2>
<ol type="1">
<li>Locates the DOCA device.</li>
<li>Initializes the necessary DOCA core structures.</li>
<li>Populates the DOCA memory map with two relevant buffers.</li>
<li>Allocates an element in the DOCA buffer inventory for each buffer.</li>
<li>Initializes the DOCA DMA memory copy task object.</li>
<li>Submits the DMA task.</li>
<li>Handles task completion once it is done.</li>
<li>Checks the task result.</li>
<li>Destroys all DMA and DOCA core structures.</li>
</ol>
<h1><a class="anchor" id="autotoc_md97"></a>
References</h1>
<ul>
<li><code><a class="el" href="dma__local__copy__sample_8c.html">dma_local_copy_sample.c</a></code></li>
<li><code><a class="el" href="dma__local__copy__main_8c.html">dma_local_copy_main.c</a></code></li>
<li><code>meson.build</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md98"></a>
DMA Copy Host</h1>
<p><b>Note</b>: This sample should be run first. It is user responsibility to transfer the two configuration files (descriptor and buffer) to the DPU and provide their path to the DMA Copy DPU sample.</p>
<p>This sample illustrates how to allow memory copy with DMA from the x86 host into the DPU.</p>
<p>This sample should be run on the host.</p>
<h3><a class="anchor" id="autotoc_md99"></a>
The sample logic includes</h3>
<ol type="1">
<li>Locates the DOCA device.</li>
<li>Initializes the necessary DOCA core structures.</li>
<li>Populates the DOCA memory map with the source buffer.</li>
<li>Exports the memory map.</li>
<li>Saves the export descriptor and local DMA buffer information into files. These files should be transferred to the DPU before running the DPU sample.</li>
<li>Waits until the DPU DMA sample has finished.</li>
<li>Destroys all DMA and DOCA core structures.</li>
</ol>
<h2><a class="anchor" id="autotoc_md100"></a>
References</h2>
<ul>
<li><code><a class="el" href="dma__copy__host__sample_8c.html">dma_copy_host_sample.c</a></code></li>
<li><code><a class="el" href="dma__copy__host__main_8c.html">dma_copy_host_main.c</a></code></li>
<li><code>meson.build</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md101"></a>
DMA Copy DPU</h1>
<p><b>Note</b>: This sample should be run only after the DMA Copy Host sample has been run and the required configuration files (descriptor and buffer) have been copied to the DPU.</p>
<p>This sample illustrates how to copy memory (containing user-defined text) with DMA from the x86 host into the DPU.</p>
<p>This sample should be executed on the DPU.</p>
<h3><a class="anchor" id="autotoc_md102"></a>
The sample logic includes</h3>
<ol type="1">
<li>Locates the DOCA device.</li>
<li>Initializes the necessary DOCA core structures.</li>
<li>Reads configuration files and saves their content into local buffers.</li>
<li>Allocates the local destination buffer in which the host text will be saved.</li>
<li>Populates the DOCA memory map with the destination buffer.</li>
<li>Creates the remote memory map using the export descriptor file.</li>
<li>Creates a memory map to the remote buffer.</li>
<li>Allocates an element in the DOCA buffer inventory for each buffer.</li>
<li>Initializes the DOCA DMA memory copy task object.</li>
<li>Submits the DMA task.</li>
<li>Handles task completion once it is done.</li>
<li>Checks the DMA task result.</li>
<li>If the DMA task ends successfully, prints the text that has been copied to the log.</li>
<li>Prints a log message indicating that the host-side sample can be closed.</li>
<li>Destroys all DMA and DOCA core structures.</li>
</ol>
<h2><a class="anchor" id="autotoc_md103"></a>
References</h2>
<ul>
<li><code><a class="el" href="dma__copy__dpu__sample_8c.html">dma_copy_dpu_sample.c</a></code></li>
<li><code><a class="el" href="dma__copy__dpu__main_8c.html">dma_copy_dpu_main.c</a></code></li>
<li><code>meson.build</code> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 13 2025 08:00:17 for NVIDIA DOCA SDK by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
