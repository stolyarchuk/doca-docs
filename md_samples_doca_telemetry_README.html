<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NVIDIA DOCA SDK: DOCA Telemetry Diagnostics Sample</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<!-- Doxygen Awesome CSS -->
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
DoxygenAwesomeFragmentCopyButton.init()
DoxygenAwesomeParagraphLink.init()
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectname">NVIDIA DOCA SDK
  </td>
  <td id="projectbrief">Data Center on a Chip Framework Documentation</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_samples_doca_telemetry_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DOCA Telemetry Diagnostics Sample </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This README describes the telemetry diagnostics sample based on the <code>doca_telemetry_diag</code> library.</p>
<p>The sample demonstrates the use of DOCA telemetry diagnostics APIs to initialize and configure the <code>doca_telemetry_diag</code> context, as well as querying and parsing diagnostic counters.</p>
<h1><a class="anchor" id="autotoc_md255"></a>
Sample Usage</h1>
<div class="fragment"><div class="line">Usage: doca_telemetry_diag [DOCA Flags] [Program Flags]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md256"></a>
DOCA Flags</h2>
<ul>
<li><code>-h</code>, <code>--help</code> : Print a help synopsis</li>
<li><code>-v</code>, <code>--version</code> : Print program version information</li>
<li><code>-l</code>, <code>--log-level</code> : Set the (numeric) log level for the program (<code>&lt;10=DISABLE, 20=CRITICAL, 30=ERROR, 40=WARNING, 50=INFO, 60=DEBUG, 70=TRACE&gt;</code>)</li>
<li><code>--sdk-log-level</code> : Set the SDK (numeric) log level for the program (<code>&lt;10=DISABLE, 20=CRITICAL, 30=ERROR, 40=WARNING, 50=INFO, 60=DEBUG, 70=TRACE&gt;</code>)</li>
<li><code>-j</code>, <code>--json &lt;path&gt;</code> : Parse all command flags from an input JSON file</li>
</ul>
<h2><a class="anchor" id="autotoc_md257"></a>
Program Flags</h2>
<ul>
<li><code>-p</code>, <code>--pci-addr</code> : DOCA device PCI device address</li>
<li><code>-di</code>, <code>--data-ids</code> : Path to data IDs JSON file</li>
<li><code>-o</code>, <code>--output</code> : Output CSV file (default: <code>/tmp/out.csv</code>)</li>
<li><code>-rt</code>, <code>--sample-run-time</code> : Total sample run time, in seconds</li>
<li><code>-sp</code>, <code>--sample-period</code> : Sample period, in nanoseconds</li>
<li><code>-ns</code>, <code>--log-num-samples</code> : Log max number of samples</li>
<li><code>-sr</code>, <code>--max-samples-per-read</code> : Max number of samples per read</li>
<li><code>-sm</code>, <code>--sample-mode</code> : Sample mode (<code>0 - single, 1 - repetitive, 2 - on demand</code>)</li>
<li><code>-of</code>, <code>--output-format</code> : Output format</li>
<li><code>-f</code>, <code>--force-ownership</code> : Force ownership when creating context</li>
<li><code>-e</code>, <code>--example-json-path</code> : Generate an example JSON file with the default data IDs to the given path and exit immediately. This file can be used as input later on. All other flags are ignored.</li>
</ul>
<h1><a class="anchor" id="autotoc_md258"></a>
Sample Logic</h1>
<ol type="1">
<li>Locating a DOCA device.</li>
<li>Initializing and configuring the <code>doca_telemetry_diag</code> instance.</li>
<li>Applying a list of data IDs to sample (either from a source JSON file or the default data IDs).</li>
<li>Starting the <code>doca_telemetry_diag</code> instance.</li>
<li>Allocating a buffer according to the sample size and the number of desired samples.</li>
<li>Querying the actual sample time after starting.</li>
<li>Retrieving samples and writing the retrieved data to a <code>.csv</code> file (either once or periodically).</li>
<li>Stopping the data IDs sampling.</li>
<li>Releasing all resources and destroying the context.</li>
</ol>
<p>The sample can use data IDs given by the user using a JSON file.</p>
<p>An example of the JSON file format can be created by using the "-e" flag on the sample, to export an example JSON file containing the default data IDs to a given path. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 13 2025 08:00:17 for NVIDIA DOCA SDK by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
